#include "graphics.hpp"
#include <iostream>
#include <sstream>
#include <cmath>
using namespace genv;
using namespace std;


int main()
{

    gout.open(400,400);
    gout.showmouse(true);
    event ev;
    while(gin >> ev && ev.keycode != key_escape) {
        gout << move_to(0, 0);
        gout << color(0, 0, 0);
        gout << box(400, 400) << refresh;
        gout << move_to(200, 200);
        gout << color(255, 255, 255);
        gout << line_to(ev.pos_x, ev.pos_y) << refresh;
        gout << move_to(20, 20);
        stringstream ss1, ss2, ss3;
        string xx, yy, tt;
        ss1 << ev.pos_x << ":" << ev.pos_y;
        ss1 >> xx;
        gout << text(xx) << refresh;
        gout << move_to(100, 20);
        int a = sqrt(pow((200-ev.pos_x),2)+pow((200-ev.pos_y),2));
        ss3 << a;
        ss3 >> tt;
        gout << text(tt) << refresh;
        double deg = atan2(ev.pos_y, ev.pos_x);
        ss2 << deg;
        ss2 >> yy;
        gout << move_to(300 , 20) << text(yy) << refresh;
    }
    return 0;
}
